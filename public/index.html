<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradeVault ‚Äî Trading Journal</title>
    <meta name="description"
        content="Track, analyze, and improve your trading performance with TradeVault professional trading journal.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>

<body>

    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle navigation">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round">
                    <line x1="3" y1="6" x2="21" y2="6" />
                    <line x1="3" y1="12" x2="21" y2="12" />
                    <line x1="3" y1="18" x2="21" y2="18" />
                </svg>
            </button>
            <div class="header-brand">
                <div class="logo">
                    <svg width="28" height="28" viewBox="0 0 28 28" fill="none">
                        <rect width="28" height="28" rx="7" fill="url(#logoGrad)" />
                        <path d="M7 18L12 11L16 15L21 8" stroke="#fff" stroke-width="2.2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <circle cx="21" cy="8" r="2" fill="#fff" />
                        <defs>
                            <linearGradient id="logoGrad" x1="0" y1="0" x2="28" y2="28">
                                <stop stop-color="#6366f1" />
                                <stop offset="1" stop-color="#a855f7" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <h1 class="brand-name">TradeVault</h1>
            </div>
        </div>
        <button class="btn-add-trade" id="btn-open-modal">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <line x1="12" y1="5" x2="12" y2="19" />
                <line x1="5" y1="12" x2="19" y2="12" />
            </svg>
            New Trade
        </button>
    </header>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <!-- Collapsible Sidebar -->
    <aside class="sidebar" id="sidebar">
        <nav class="sidebar-nav">
            <button class="nav-btn active" data-view="dashboard" id="nav-dashboard">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="7" height="7" rx="1" />
                    <rect x="14" y="3" width="7" height="7" rx="1" />
                    <rect x="3" y="14" width="7" height="7" rx="1" />
                    <rect x="14" y="14" width="7" height="7" rx="1" />
                </svg>
                <span>Dashboard</span>
            </button>
            <button class="nav-btn" data-view="journal" id="nav-journal">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 19.5A2.5 2.5 0 016.5 17H20" />
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z" />
                </svg>
                <span>Journal</span>
            </button>
            <button class="nav-btn" data-view="strategies" id="nav-strategies">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3" />
                    <path
                        d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z" />
                </svg>
                <span>Strategies</span>
            </button>
            <button class="nav-btn" data-view="charts" id="nav-charts">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="22 12 18 12 15 21 9 3 6 12 2 12" />
                </svg>
                <span>Charts</span>
            </button>
            <button class="nav-btn" data-view="ai" id="nav-ai">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2a4 4 0 014 4c0 1.95-1.4 3.58-3.25 3.93L12 22l-.75-12.07A4.001 4.001 0 0112 2z" />
                    <path d="M8 10s-2 1-2 3 2 3 2 3" />
                    <path d="M16 10s2 1 2 3-2 3-2 3" />
                </svg>
                <span>AI Insights</span>
            </button>
            <button class="nav-btn" data-view="rl-model" id="nav-rl-model">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M2 20h20" />
                    <path d="M5 20V9l3-3 4 4 4-8 3 5v13" />
                </svg>
                <span>RL Model</span>
            </button>
        </nav>
        <div class="sidebar-footer">
            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:0.5rem;">
                <span class="sidebar-version" id="user-greeting"
                    style="font-size:0.8rem;color:var(--text-secondary);"></span>
                <button class="btn-icon" id="btn-logout" title="Logout"
                    style="color:var(--text-muted);border:none;background:transparent;cursor:pointer;padding:4px;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4" />
                        <polyline points="16 17 21 12 16 7" />
                        <line x1="21" y1="12" x2="9" y2="12" />
                    </svg>
                </button>
            </div>
            <span class="sidebar-version">TradeVault v2.0</span>
        </div>
    </aside>

    <!-- Dashboard View -->
    <main class="view active" id="view-dashboard">
        <section class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon stat-icon--pnl">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="1" x2="12" y2="23" />
                        <path d="M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6" />
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Total P&L</span>
                    <span class="stat-value" id="val-total-pnl">$0.00</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon stat-icon--win">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 11-5.93-9.14" />
                        <polyline points="22 4 12 14.01 9 11.01" />
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Win Rate</span>
                    <span class="stat-value" id="val-win-rate">0%</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon stat-icon--trades">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12" />
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Total Trades</span>
                    <span class="stat-value" id="val-total-trades">0</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon stat-icon--best">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />
                        <polyline points="17 6 23 6 23 12" />
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Best Trade</span>
                    <span class="stat-value" id="val-best-trade">$0.00</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon stat-icon--worst">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="23 18 13.5 8.5 8.5 13.5 1 6" />
                        <polyline points="17 18 23 18 23 12" />
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Worst Trade</span>
                    <span class="stat-value" id="val-worst-trade">$0.00</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon stat-icon--avg">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="20" x2="18" y2="10" />
                        <line x1="12" y1="20" x2="12" y2="4" />
                        <line x1="6" y1="20" x2="6" y2="14" />
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Avg R:R</span>
                    <span class="stat-value" id="val-avg-rr">0.00</span>
                </div>
            </div>
        </section>

        <section class="recent-trades-section">
            <div class="section-header">
                <h2>Recent Trades</h2>
                <button class="btn-text" id="btn-view-all">View All ‚Üí</button>
            </div>
            <div class="table-wrapper">
                <table class="trades-table" id="recent-trades-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Symbol</th>
                            <th>Direction</th>
                            <th>Entry</th>
                            <th>Exit</th>
                            <th>Size</th>
                            <th>P&L</th>
                            <th>Result</th>
                            <th>R:R</th>
                        </tr>
                    </thead>
                    <tbody id="recent-trades-body"></tbody>
                </table>
                <div class="empty-state" id="dashboard-empty">
                    <svg width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2"
                        opacity="0.3">
                        <path d="M4 19.5A2.5 2.5 0 016.5 17H20" />
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z" />
                    </svg>
                    <p>No trades yet. Click <strong>"New Trade"</strong> to get started.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Journal View -->
    <main class="view" id="view-journal">
        <section class="journal-controls">
            <div class="search-box">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8" />
                    <line x1="21" y1="21" x2="16.65" y2="16.65" />
                </svg>
                <input type="text" id="search-input" placeholder="Search by symbol or notes‚Ä¶">
            </div>
            <div class="filter-group">
                <select id="filter-direction">
                    <option value="all">All Directions</option>
                    <option value="BUY">Buy</option>
                    <option value="SELL">Sell</option>
                </select>
                <select id="filter-result">
                    <option value="all">All Results</option>
                    <option value="WIN">Winners</option>
                    <option value="LOSS">Losers</option>
                    <option value="BE">Breakeven</option>
                </select>
                <select id="filter-strategy">
                    <option value="all">All Strategies</option>
                </select>
            </div>
        </section>
        <div class="table-wrapper">
            <table class="trades-table" id="journal-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Symbol</th>
                        <th>Asset</th>
                        <th>Direction</th>
                        <th>Entry</th>
                        <th>Exit</th>
                        <th>Size</th>
                        <th>SL</th>
                        <th>TP</th>
                        <th>P&L</th>
                        <th>Result</th>
                        <th>R:R</th>
                        <th>Strategy</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="journal-trades-body"></tbody>
            </table>
            <div class="empty-state" id="journal-empty">
                <svg width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2"
                    opacity="0.3">
                    <path d="M4 19.5A2.5 2.5 0 016.5 17H20" />
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z" />
                </svg>
                <p>Your journal is empty. Start by adding your first trade.</p>
            </div>
        </div>
    </main>

    <!-- Strategies View -->
    <main class="view" id="view-strategies">
        <div class="section-header">
            <h2>Strategies</h2>
            <button class="btn-add-trade" id="btn-open-strategy-modal">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <line x1="12" y1="5" x2="12" y2="19" />
                    <line x1="5" y1="12" x2="19" y2="12" />
                </svg>
                New Strategy
            </button>
        </div>
        <div class="strategies-grid" id="strategies-grid">
            <div class="empty-state" id="strategies-empty">
                <svg width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2"
                    opacity="0.3">
                    <circle cx="12" cy="12" r="3" />
                    <path
                        d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z" />
                </svg>
                <p>No strategies defined. Create one to link to your trades.</p>
            </div>
        </div>
    </main>

    <!-- Charts View -->
    <main class="view" id="view-charts">
        <div class="chart-controls">
            <div class="search-box">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8" />
                    <line x1="21" y1="21" x2="16.65" y2="16.65" />
                </svg>
                <input type="text" id="chart-symbol-input" placeholder="Enter symbol (e.g. AAPL, BTCUSD, EURUSD)‚Ä¶"
                    value="AAPL">
            </div>
            <button class="btn btn-primary" id="btn-load-chart">Load Chart</button>
        </div>
        <div class="chart-container chart-container--large" id="tradingview-container">
            <div id="tradingview-widget"></div>
        </div>
    </main>

    <!-- AI Suggestions View -->
    <main class="view" id="view-ai">
        <!-- Live Signals Panel -->
        <div class="live-signals-panel">
            <div class="section-header">
                <h2>üì° Live Strategy Signals</h2>
                <div class="live-status" id="ws-status">
                    <span class="status-dot disconnected"></span>
                    <span id="ws-status-text">Disconnected</span>
                </div>
            </div>
            <p class="ai-subtitle">Real-time BUY/SELL signals from SMA Crossover, RSI, and Breakout strategies on live
                Binance data.</p>
            <div class="live-controls">
                <div class="search-box">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8" />
                        <line x1="21" y1="21" x2="16.65" y2="16.65" />
                    </svg>
                    <input type="text" id="signal-symbol-input" placeholder="Enter crypto pair (e.g. BTCUSDT, ETHUSDT)"
                        value="BTCUSDT">
                </div>
                <button class="btn btn-primary" id="btn-subscribe">Subscribe</button>
                <button class="btn btn-secondary" id="btn-unsubscribe">Unsubscribe</button>
            </div>
            <div class="live-price-bar" id="live-price-bar">
                <div class="live-price-item" id="live-price-display">
                    <span class="live-sym" id="live-sym">‚Äî</span>
                    <span class="live-price" id="live-price">‚Äî</span>
                    <span class="live-change" id="live-range"></span>
                </div>
            </div>
            <div class="signal-feed" id="signal-feed">
                <div class="signal-empty">Subscribe to a symbol to see live signals.</div>
            </div>
        </div>

        <!-- RL-Based Analysis -->
        <div class="ai-analysis-section">
            <div class="section-header">
                <h2>ü§ñ AI Trade Insights</h2>
                <button class="btn btn-primary" id="btn-refresh-ai">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="23 4 23 10 17 10" />
                        <path d="M20.49 15a9 9 0 11-2.12-9.36L23 10" />
                    </svg>
                    Refresh Analysis
                </button>
            </div>
            <p class="ai-subtitle">Q-Learning model trained on your trade history to identify your best and worst
                setups.</p>
        </div>
        <div id="ai-message" class="ai-message hidden"></div>
        <div class="ai-sections" id="ai-sections">
            <div class="ai-section">
                <h3 class="ai-section-title ai-section-title--good">‚úÖ Favorable Setups</h3>
                <div class="suggestions-grid" id="suggestions-favorable"></div>
            </div>
            <div class="ai-section">
                <h3 class="ai-section-title ai-section-title--bad">üö´ Setups to Avoid</h3>
                <div class="suggestions-grid" id="suggestions-avoid"></div>
            </div>
            <div class="ai-section">
                <h3 class="ai-section-title ai-section-title--neutral">‚öñÔ∏è Neutral Setups</h3>
                <div class="suggestions-grid" id="suggestions-neutral"></div>
            </div>
        </div>

        <!-- Quant Strategies Library -->
        <div class="quant-library">
            <div class="section-header">
                <h2>üìö Quant Strategies Library</h2>
            </div>
            <p class="ai-subtitle">Published strategies from top quant & hedge fund research papers. Click "Implement"
                to add any as a strategy in your journal.</p>
            <div class="quant-filter-tabs">
                <button class="quant-tab active" data-cat="all">All</button>
                <button class="quant-tab" data-cat="momentum">Momentum</button>
                <button class="quant-tab" data-cat="mean reversion">Mean Reversion</button>
                <button class="quant-tab" data-cat="trend following">Trend Following</button>
                <button class="quant-tab" data-cat="factor">Factor</button>
                <button class="quant-tab" data-cat="statistical arbitrage">Stat Arb</button>
                <button class="quant-tab" data-cat="volatility">Volatility</button>
                <button class="quant-tab" data-cat="machine learning">ML</button>
                <button class="quant-tab" data-cat="carry">Carry</button>
                <button class="quant-tab" data-cat="event-driven">Event-Driven</button>
                <button class="quant-tab" data-cat="high frequency">HFT</button>
            </div>
            <div class="quant-grid" id="quant-grid"></div>
        </div>
    </main>

    <!-- RL Model View -->
    <main class="view" id="view-rl-model">
        <div class="section-header">
            <h2>üß† RL Trading Model ‚Äî Backtest Results</h2>
            <button class="btn btn-primary" id="btn-train-model">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polygon points="5 3 19 12 5 21 5 3" />
                </svg>
                Train Model
            </button>
        </div>
        <p class="ai-subtitle">Deep Q-Network (DQN) trained on 5 years of historical data with GPU acceleration. Shows
            past performance of the RL agent, HFT Momentum, and Jim Simons Linear Regression strategies.</p>

        <!-- Model Stats -->
        <section class="stats-grid" id="rl-stats-grid">
            <div class="stat-card">
                <div class="stat-icon stat-icon--pnl">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="1" x2="12" y2="23" />
                        <path d="M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6" />
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Total Return</span>
                    <span class="stat-value" id="rl-total-return">‚Äî</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon stat-icon--win">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 11-5.93-9.14" />
                        <polyline points="22 4 12 14.01 9 11.01" />
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Win Rate</span>
                    <span class="stat-value" id="rl-win-rate">‚Äî</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon stat-icon--trades">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12" />
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Sharpe Ratio</span>
                    <span class="stat-value" id="rl-sharpe">‚Äî</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon stat-icon--worst">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="23 18 13.5 8.5 8.5 13.5 1 6" />
                        <polyline points="17 18 23 18 23 12" />
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Max Drawdown</span>
                    <span class="stat-value" id="rl-max-dd">‚Äî</span>
                </div>
            </div>
        </section>

        <!-- Equity Curve Chart -->
        <section class="rl-chart-section">
            <div class="section-header">
                <h3>Equity Curve</h3>
                <div class="rl-strategy-tabs">
                    <button class="quant-tab active" data-rl-strat="dqn">DQN Agent</button>
                    <button class="quant-tab" data-rl-strat="hft">HFT Momentum</button>
                    <button class="quant-tab" data-rl-strat="linreg">Jim Simons LR</button>
                </div>
            </div>
            <div class="rl-chart-container">
                <canvas id="rl-equity-chart"></canvas>
            </div>
        </section>

        <!-- Year-by-Year Performance Table -->
        <section class="rl-yearly-section">
            <div class="section-header">
                <h3>Year-by-Year Performance</h3>
            </div>
            <div class="table-wrapper">
                <table class="trades-table" id="rl-yearly-table">
                    <thead>
                        <tr>
                            <th>Year</th>
                            <th>Strategy</th>
                            <th>Return %</th>
                            <th>Trades</th>
                            <th>Win Rate</th>
                            <th>Sharpe</th>
                            <th>Max DD</th>
                            <th>Profit Factor</th>
                        </tr>
                    </thead>
                    <tbody id="rl-yearly-body">
                        <tr>
                            <td colspan="8" class="empty-state"
                                style="padding:2rem;text-align:center;color:var(--text-muted);">Train the model to see
                                backtest results.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Strategy Details -->
        <section class="rl-strategies-detail">
            <div class="strategies-grid">
                <div class="strategy-card">
                    <div class="strategy-header">
                        <span class="strategy-badge strategy-badge--ml">DQN</span>
                        <h4>Deep Q-Network Agent</h4>
                    </div>
                    <p class="strategy-desc">3-layer neural network (128‚Üí64‚Üí32) with experience replay and target
                        network. Trained using PyTorch with CUDA GPU acceleration.</p>
                    <div class="strategy-meta">
                        <span>Actions: BUY / SELL / HOLD</span>
                        <span>Features: SMA, RSI, MACD, BB, ATR</span>
                    </div>
                </div>
                <div class="strategy-card">
                    <div class="strategy-header">
                        <span class="strategy-badge strategy-badge--hft">HFT</span>
                        <h4>HFT Momentum Strategy</h4>
                    </div>
                    <p class="strategy-desc">High-frequency microstructure strategy using VWAP deviation, tick momentum,
                        and micro-price analysis for ultra-short-term signals.</p>
                    <div class="strategy-meta">
                        <span>Timeframe: Tick / 1-min</span>
                        <span>Source: Market Microstructure</span>
                    </div>
                </div>
                <div class="strategy-card">
                    <div class="strategy-header">
                        <span class="strategy-badge strategy-badge--quant">LR</span>
                        <h4>Jim Simons Linear Regression</h4>
                    </div>
                    <p class="strategy-desc">Rolling multifactor regression on price, volume, and momentum features
                        inspired by Renaissance Technologies' quantitative approach.</p>
                    <div class="strategy-meta">
                        <span>Timeframe: Daily</span>
                        <span>Source: Renaissance Technologies</span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Trade Modal -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal modal--wide" id="trade-modal">
            <div class="modal-header">
                <h2 id="modal-title">New Trade</h2>
                <button class="modal-close" id="btn-close-modal">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <form id="trade-form" autocomplete="off">
                <input type="hidden" id="trade-id">
                <div class="form-row form-row--3">
                    <div class="form-group">
                        <label for="trade-symbol">Symbol *</label>
                        <input type="text" id="trade-symbol" placeholder="e.g. AAPL" required>
                    </div>
                    <div class="form-group">
                        <label for="trade-date">Trade Date *</label>
                        <input type="date" id="trade-date" required>
                    </div>
                    <div class="form-group">
                        <label for="trade-asset-class">Asset Class</label>
                        <select id="trade-asset-class">
                            <option value="stock">Stock</option>
                            <option value="forex">Forex</option>
                            <option value="crypto">Crypto</option>
                            <option value="futures">Futures</option>
                            <option value="options">Options</option>
                            <option value="commodity">Commodity</option>
                        </select>
                    </div>
                </div>
                <div class="form-row form-row--3">
                    <div class="form-group">
                        <label for="trade-direction">Direction *</label>
                        <select id="trade-direction" required>
                            <option value="BUY">Buy (Long)</option>
                            <option value="SELL">Sell (Short)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="trade-strategy">Strategy</label>
                        <select id="trade-strategy">
                            <option value="">‚Äî None ‚Äî</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="trade-confidence">Confidence (1-5)</label>
                        <div class="confidence-stars" id="confidence-stars">
                            <span class="star" data-val="1">‚òÖ</span>
                            <span class="star" data-val="2">‚òÖ</span>
                            <span class="star" data-val="3">‚òÖ</span>
                            <span class="star" data-val="4">‚òÖ</span>
                            <span class="star" data-val="5">‚òÖ</span>
                        </div>
                        <input type="hidden" id="trade-confidence" value="">
                    </div>
                </div>
                <div class="form-row form-row--4">
                    <div class="form-group">
                        <label for="trade-entry">Entry Price *</label>
                        <input type="number" id="trade-entry" placeholder="0.00" min="0" step="any" required>
                    </div>
                    <div class="form-group">
                        <label for="trade-exit">Exit Price</label>
                        <input type="number" id="trade-exit" placeholder="0.00" min="0" step="any">
                    </div>
                    <div class="form-group">
                        <label for="trade-sl">Stop Loss</label>
                        <input type="number" id="trade-sl" placeholder="0.00" min="0" step="any">
                    </div>
                    <div class="form-group">
                        <label for="trade-tp">Take Profit</label>
                        <input type="number" id="trade-tp" placeholder="0.00" min="0" step="any">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="trade-size">Position Size *</label>
                        <input type="number" id="trade-size" placeholder="0" min="0.0001" step="any" required>
                    </div>
                    <div class="form-group">
                        <label for="trade-rr">R:R Ratio</label>
                        <input type="number" id="trade-rr" placeholder="e.g. 2.5" min="0" step="any">
                    </div>
                </div>
                <div class="form-group full">
                    <label for="trade-notes">Notes</label>
                    <textarea id="trade-notes" rows="3"
                        placeholder="What was your rationale? What did you learn?"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="btn-cancel-modal">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="btn-save-trade">Save Trade</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Strategy Modal -->
    <div class="modal-overlay" id="strategy-modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2 id="strategy-modal-title">New Strategy</h2>
                <button class="modal-close" id="btn-close-strategy-modal">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <form id="strategy-form" autocomplete="off">
                <input type="hidden" id="strategy-id">
                <div class="form-row">
                    <div class="form-group">
                        <label for="strategy-name">Strategy Name *</label>
                        <input type="text" id="strategy-name" placeholder="e.g. Scalping" required>
                    </div>
                    <div class="form-group">
                        <label for="strategy-timeframe">Timeframe</label>
                        <select id="strategy-timeframe">
                            <option value="">‚Äî None ‚Äî</option>
                            <option value="1m">1 Minute</option>
                            <option value="5m">5 Minutes</option>
                            <option value="15m">15 Minutes</option>
                            <option value="1h">1 Hour</option>
                            <option value="4h">4 Hours</option>
                            <option value="1D">Daily</option>
                            <option value="1W">Weekly</option>
                        </select>
                    </div>
                </div>
                <div class="form-group full">
                    <label for="strategy-description">Description</label>
                    <textarea id="strategy-description" rows="3"
                        placeholder="Describe your strategy rules and setup‚Ä¶"></textarea>
                </div>
                <div class="form-group">
                    <label for="strategy-risk">Risk Per Trade (%)</label>
                    <input type="number" id="strategy-risk" placeholder="1.00" min="0" step="0.01" value="1.00">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="btn-cancel-strategy">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Strategy</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Trade Detail Drawer -->
    <div class="drawer-overlay" id="drawer-overlay">
        <div class="drawer" id="trade-drawer">
            <div class="drawer-header">
                <h2 id="drawer-title">Trade Details</h2>
                <button class="modal-close" id="btn-close-drawer">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <div class="drawer-tabs">
                <button class="drawer-tab active" data-tab="conditions">Market Conditions</button>
                <button class="drawer-tab" data-tab="executions">Execution Log</button>
                <button class="drawer-tab" data-tab="screenshots">Screenshots</button>
            </div>
            <div class="drawer-content">
                <!-- Market Conditions Tab -->
                <div class="drawer-pane active" id="pane-conditions">
                    <form id="conditions-form" autocomplete="off">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="cond-trend">Trend</label>
                                <select id="cond-trend">
                                    <option value="bullish">Bullish</option>
                                    <option value="bearish">Bearish</option>
                                    <option value="range">Range</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="cond-session">Session</label>
                                <select id="cond-session">
                                    <option value="London">London</option>
                                    <option value="NY">New York</option>
                                    <option value="Asia">Asia</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="cond-vix">Volatility Index</label>
                                <input type="number" id="cond-vix" placeholder="e.g. 18.5" step="any">
                            </div>
                            <div class="form-group">
                                <label for="cond-news">News Event?</label>
                                <select id="cond-news">
                                    <option value="0">No</option>
                                    <option value="1">Yes</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Conditions</button>
                        </div>
                    </form>
                </div>

                <!-- Execution Log Tab -->
                <div class="drawer-pane" id="pane-executions">
                    <form id="execution-form" class="inline-form" autocomplete="off">
                        <input type="datetime-local" id="exec-time" required>
                        <input type="number" id="exec-price" placeholder="Price" step="any" required>
                        <input type="number" id="exec-qty" placeholder="Qty" step="any" required>
                        <button type="submit" class="btn btn-primary btn--sm">Add</button>
                    </form>
                    <table class="trades-table mini-table" id="exec-table">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Price</th>
                                <th>Qty</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="exec-body"></tbody>
                    </table>
                    <div class="empty-state mini-empty" id="exec-empty">No executions logged.</div>
                </div>

                <!-- Screenshots Tab -->
                <div class="drawer-pane" id="pane-screenshots">
                    <form id="screenshot-form" class="inline-form" enctype="multipart/form-data">
                        <input type="file" id="screenshot-file" accept="image/*" required>
                        <button type="submit" class="btn btn-primary btn--sm">Upload</button>
                    </form>
                    <div class="screenshots-gallery" id="screenshots-gallery"></div>
                    <div class="empty-state mini-empty" id="screenshots-empty">No screenshots uploaded.</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="delete-overlay">
        <div class="modal modal--small">
            <div class="modal-header">
                <h2>Delete Trade</h2>
                <button class="modal-close" id="btn-close-delete">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <p class="delete-msg">Are you sure you want to delete this trade? All related data (executions, conditions,
                screenshots) will also be removed.</p>
            <div class="form-actions">
                <button class="btn btn-secondary" id="btn-cancel-delete">Cancel</button>
                <button class="btn btn-danger" id="btn-confirm-delete">Delete</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script src="app.js"></script>
</body>

</html>